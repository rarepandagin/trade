{% extends "dashboard/base.html" %}

{% load static %}


{% block basebody %}
{% load custom_tags %}

 
    <div id="orderBookBarPlot" style="width: 100%; height: 600px;"></div>

    <div class="mt-5">
        
        <form method="POST" >
            {% csrf_token %}

            <input type="text" name="update_depth_plot_settings" hidden>

            <div class="d-flex justify-content-around  flex-sm-row flex-column gap-2">


                <div class="form-check m-0 mb-2">
                    <input class="form-check-input" type="checkbox"  name="depth_filtering_active" id="depth_filtering_active" {% if admin_settings.depth_filtering_active %} checked {% endif %}>
                    <label class="form-check-label" for="depth_filtering_active">
                        depth_filtering_active
                    </label>
                </div>

                <div>
                    <p>min price:</p>
                    <input type="number" class="form-control form-control-sm" name="depth_lowest_price" value="{{admin_settings.depth_lowest_price}}" style="width: 100px;"  step="any"/>
                </div>

                <div>
                    <p>max price:</p>
                    <input type="number" class="form-control form-control-sm" name="depth_highest_price" value="{{admin_settings.depth_highest_price}}" style="width: 100px;"  step="any"/>
                </div>

                <div>
                    <p>cluster size:</p>
                    <input type="number" class="form-control form-control-sm" name="depth_cluster_width_usd" value="{{admin_settings.depth_cluster_width_usd}}" style="width: 100px;"  step="any"/>
                </div>


                <button class="btn btn-primary btn-sm m-1" type="submit" >set</button>

            </div>


            
        </form>

    </div>


   <div class="d-flex justify-content-center">
        <div id="orderBookSeriesPlot" style=" height: 600px;"></div>
    </div>
    
    
    <!-- ANALYSIS -->
    <div class="d-flex justify-content-around mt-5">

        <div>
            <div>
                <p>best_bid_price</p>
                <p id="best_bid_price"></p>
            </div>
            
            <div>
                <p>best_bid_volume</p>
                <p id="best_bid_volume"></p>
            </div>
        </div>

        <div>
                <p>mean price</p>
                <p id="mean_price"></p>
        </div>
        <div>

            <div>
                <p>best_ask_price</p>
                <p id="best_ask_price"></p>
            </div>
            
            <div>
                <p>best_ask_volume</p>
                <p id="best_ask_volume"></p>
            </div>
        </div>

    </div>



    <div class="d-flex justify-content-center">
        <div id="orderBookPiePlot" style=" width: 100%; height: 600px;"></div>
    </div>
<script>


    $(document).ready(function () {

        setup_ws_depth();

    })

</script>
{% endblock %}
