{% extends "dashboard/base.html" %}

{% load static %}


{% block basebody %}
{% load custom_tags %}

 

    <h3 class="">Arbi</h3>

    <div class="d-flex justify-content-start gap-5 border rounded mb-5">

        <div>

            

            <button type="button" onclick="arbi_balance();" class="btn btn-primary btn-sm m-1">Balance</button>
            <button type="button" onclick="arbi_deposit();" class="btn btn-primary btn-sm m-1">Deposit</button>
            <button type="button" onclick="arbi_withdraw();" class="btn btn-primary btn-sm m-1">Withdraw</button>


        </div>


        <div>
            


                <div class="d-flex justify-content-start">
                    
                    <input  class="form-control form-control-sm" type="number" style="width: 120px;" step="any" id="arbi_wrap_eth_amount" value="0.001" required />
                    
                    <button type="button" class="btn btn-primary btn-sm m-1" onclick="arbi_wrap_eth();">Wrap eth</button>
                </div>






                <div class="d-flex justify-content-start">
                    
                    <input  class="form-control form-control-sm" type="number" style="width: 120px;" step="any" id="arbi_unwrap_weth_amount" value="0.001" required />
                    
                    <button type="button" class="btn btn-primary btn-sm m-1" onclick="arbi_unwrap_weth();">Unwrap weth</button>
                </div>




        </div>


        <div>

            <button type="button" onclick="arbi_approve();" class="btn btn-primary btn-sm m-1">Approve</button>
            <button type="button" onclick="arbi_allowance();" class="btn btn-primary btn-sm m-1">Allowance</button>

        </div>


        <div>

            <input type="number" min="1" step="1" class="form-control form-control-sm" id="fiat_loan_amount" value="100" style="width: 100px;">
            <button type="button" onclick="arbi_action_2();" class="btn btn-primary btn-sm m-1">Flash loan</button>



        </div>
        <div>
            <button type="button" onclick="arbi_single_swap();" class="btn btn-primary btn-sm m-1">Single Swap</button>
        </div>
    </div>
    

    <h3>Uniswap</h3>
    <div class="border rounded p-2" >


        <form method="POST">
            {% csrf_token %}

            <button type="submit" name="uniswap_approve" class="btn btn-primary btn-sm m-1">Uniswap approve</button>

        </form>



        <form method="POST">
            {% csrf_token %}


            



            <div class="d-flex justify-content-start">

                <input  class="form-control form-control-sm"  style="width: 120px;" type="number" step="any" name="fiat_to_token_amount" value="1" required />

                <p class="mx-1 mt-1">Fiat to</p>


                {% include "dashboard/subtempelates/coins_template.html" %}

                    
                <button type="submit" name="fiat_to_token" class="btn btn-primary btn-sm m-1">Fiat to Token</button>

            </div>

            
            


        </form>

        <form method="POST">
            {% csrf_token %}


            <div class="d-flex justify-content-start">
                
                <input  class="form-control form-control-sm" type="number" style="width: 120px;" step="any" name="token_to_fiat_amount" value="0.000231957530" required />
                
                {% include "dashboard/subtempelates/coins_template.html" %}


                <p class="mx-1 mt-1">Token to fiat</p>

                <button type="submit" name="fiat_to_token" class="btn btn-primary btn-sm m-1">Token to fiat</button>
            </div>

        </form>


        <form method="POST">
            {% csrf_token %}


            <div class="d-flex justify-content-start">
                
                <input  class="form-control form-control-sm" type="number" style="width: 120px;" step="any" name="eth_amount_to_wrap" value="0.001" required />
                
                <button type="submit" class="btn btn-primary btn-sm m-1">Wrap eth</button>
            </div>

        </form>



        <form method="POST">
            {% csrf_token %}


            <div class="d-flex justify-content-start">
                
                <input  class="form-control form-control-sm" type="number" style="width: 120px;" step="any" name="weth_amount_to_unwrap" value="0.001" required />
                
                <button type="submit" class="btn btn-primary btn-sm m-1">Unwrap weth</button>
            </div>

        </form>



    </div>


    
    <h3 class="mt-5">Aave</h3>
    <div class="border rounded p-2 "  style="display: none;">


        <form method="POST" class="mb-2">
            {% csrf_token %}

            <div class="d-flex justify-content-start">

                <button type="submit" name="aave_approve" class="btn btn-primary btn-sm m-1">Aave approve</button>

            </div>

        </form>

        <form method="POST" class="mb-2">
            {% csrf_token %}

            <div class="d-flex justify-content-start">

                <input  class="form-control form-control-sm"  style="width: 120px;" type="number" step="any" name="aave_supply_amount" value="0.0002" required />

                <button type="submit"  class="btn btn-primary btn-sm m-1">Supply collateral</button>

            </div>

        </form>


        <form method="POST" class="mb-2">
            {% csrf_token %}

            <div class="d-flex justify-content-start">

                <input  class="form-control form-control-sm"  style="width: 120px;" type="number" step="any" name="aave_withdraw_amount" value="0.0002" required />

                <button type="submit"  class="btn btn-primary btn-sm m-1">Withdraw collateral</button>

            </div>

        </form>



        <form method="POST" class="mb-2">
            {% csrf_token %}

            <div class="d-flex justify-content-start">

                <input  class="form-control form-control-sm"  style="width: 120px;" type="number" step="any" name="aave_borrow_amount" value="0.0002" required />

                <button type="submit"  class="btn btn-primary btn-sm m-1">Borrow</button>

            </div>

        </form>



        <form method="POST" class="mb-2">
            {% csrf_token %}

            <div class="d-flex justify-content-start">

                <input  class="form-control form-control-sm"  style="width: 120px;" type="number" step="any" name="aave_repay_amount" value="0.0002" required />

                <button type="submit"  class="btn btn-primary btn-sm m-1">Repay</button>

            </div>

        </form>


    </div>



    

<script>

    function arbi_balance(){
        ajax_call('arbi_balance', {})
    }


    function arbi_deposit(){
        ajax_call('arbi_deposit', {})
    }


    function arbi_withdraw(){
        ajax_call('arbi_withdraw', {})
    }


    function arbi_approve(){
        ajax_call('arbi_approve', {})
    }


    function arbi_allowance(){
        ajax_call('arbi_allowance', {})
    }


    function arbi_action_2(){
        ajax_call('arbi_action_2', {'fiat_loan_amount': $("#fiat_loan_amount").val()})
    }

    function arbi_wrap_eth(){
        ajax_call('arbi_wrap_eth', {'amount': $("#arbi_wrap_eth_amount").val()})
    }


    function arbi_unwrap_weth(){
        ajax_call('arbi_unwrap_weth', {'amount': $("#arbi_unwrap_weth_amount").val()})
    }


    function arbi_single_swap(){
        ajax_call('arbi_single_swap', {})
    }



    $(document).ready(function () {

        setup_ws_dashboard();

    })

</script>

{% endblock %}
